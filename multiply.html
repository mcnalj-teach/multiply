<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Multiplication Tables</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="container">
      <svg id="multiply" width="700" height="700">
      </svg>
      <form id="ansForm" action=#>
        <label id="ansLabel" for=answer>5 x 9 = </label><br>
        <input id="answer" type="text" name="answer" placeholder="your answer"></input><br><br>
        <input type="submit" class="btn btn-outline-primary btn-lg" value="Submit" id="submitBtn">
      </form>
    </div>
    <script>

      pickNumbersAndDrawCircles();
      const ansLabel = document.getElementById("ansLabel");
      var qMsg = multiplicand + " x " + multiplier + " =";
      ansLabel.innerHTML = qMsg;
      document.getElementById("answer").focus();

      document.getElementById("ansForm").onsubmit = function(event) {
        event.preventDefault();
        var userAnswer = document.getElementById("answer").value;
        var question = multiplicand * multiplier;
        if (question == userAnswer) {
          document.getElementById("answer").style.backgroundColor = "green";
          document.getElementById("answer").style.color = "white";
          const myTimeout = setTimeout(function() {
            pickNumbersAndDrawCircles();
            document.getElementById("answer").style.backgroundColor = "white";
            document.getElementById("answer").style.color = "black";
            document.getElementById("answer").value = " ";
            document.getElementById("answer").focus();
          }, 1500);
        } else {
          document.getElementById("answer").style.backgroundColor = "red";
          document.getElementById("answer").style.color = "white";
          document.getElementById("submitBtn").value = "Try Again";
          const wrongTimeout = setTimeout(function(){
            document.getElementById("answer").style.backgroundColor = "white";
            document.getElementById("answer").style.color = "black";
            document.getElementById("answer").value = " ";
            document.getElementById("answer").focus();
          }, 1600);
        }
      };
      function pickNumbersAndDrawCircles() {
        document.getElementById("submitBtn").value = "Submit";
        const svgns = "http://www.w3.org/2000/svg"
        const svg = document.getElementById('multiply');
        multiplicand = Math.floor(Math.random() * 5) + 5;
        multiplier = Math.floor(Math.random() * 5) + 5;
        var cx = 10;
        var cy = 60;
        var r = 25;
        var stroke = "black";
        var fill = "red";
        for (var j = 0; j < 10; j++) {
          for (var i = 0; i<10; i++) {
            let circ = document.createElementNS(svgns, "circle");
            cx = cx + 65;
            circ.setAttribute("cx", cx);
            circ.setAttribute("cy", cy);
            circ.setAttribute("r", r);
            circ.setAttribute("stroke", stroke);
            if (j<multiplicand && i<multiplier) {
              fill = "red";
            } else {
              fill = "LightGray"
            }
            circ.setAttribute("fill", fill);
            svg.appendChild(circ);
          }
          cx = 10;
          cy = cy + 65;
        }
        const ansLabel = document.getElementById("ansLabel");
        var qMsg = multiplicand + " x " + multiplier + " =";
        ansLabel.innerHTML = qMsg;
      }
    </script>
  </body>
</html>
